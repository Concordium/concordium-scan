{
  "db_name": "PostgreSQL",
  "query": "WITH updated_accounts AS (\n                INSERT INTO plt_accounts (account_index, token_index, amount, decimal)\n                VALUES\n                    ( (SELECT index FROM accounts WHERE canonical_address = $1::bytea),\n                    (SELECT index FROM plt_tokens WHERE token_id = $3),\n                    -$4::numeric,\n                    (SELECT decimal FROM plt_tokens WHERE token_id = $3)\n                    ),\n                    ( (SELECT index FROM accounts WHERE canonical_address = $2::bytea),\n                    (SELECT index FROM plt_tokens WHERE token_id = $3),\n                    $4::numeric,\n                    (SELECT decimal FROM plt_tokens WHERE token_id = $3)\n                    )\n                ON CONFLICT (account_index, token_index) DO UPDATE\n                SET amount = plt_accounts.amount + EXCLUDED.amount\n                RETURNING account_index\n\n            )\n            INSERT INTO plt_accounts_sum_amounts (account_index, total_amount)\n            VALUES\n                ( (SELECT index FROM accounts WHERE canonical_address = $1::bytea), -$4::numeric ),\n                ( (SELECT index FROM accounts WHERE canonical_address = $2::bytea),  $4::numeric )\n            ON CONFLICT (account_index) DO UPDATE\n            SET total_amount = plt_accounts_sum_amounts.total_amount + EXCLUDED.total_amount;\n            ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Bytea",
        "Bytea",
        "Text",
        "Numeric"
      ]
    },
    "nullable": []
  },
  "hash": "7f999c34d1b0682a7f20b88dd7713dfece5faff6a7fadddeece8d21718512db9"
}
